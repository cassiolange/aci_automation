---
- ansible.builtin.import_playbook: update.yml

- name : VRFs
  gather_facts: false
  hosts: all
  tasks:

    - name: Add a new VRF
      cisco.mso.mso_schema_template_vrf:
        schema: "{{ item.schema_name }}"
        template: "{{ item.template_name }}"
        vrf: "{{ item.name }}"
        state: "{{ item.status if item.status is defined else omit }}"
        layer3_multicast : "{{ item.enable_l3_multicast }}"
      loop: "{{ vrf }}"
      when: vrf is defined
